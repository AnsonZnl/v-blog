
# 自定义音频元素

## 前言

我们在 Web 开发过程中，有很多用到音频元素`audio`的场景，如音乐播放器、语音播放等功能，但是由于原生组件有以下缺点：

- 原生UI样式丑，在追求美观的页面中需要重写元素样式，而且支持重写的样式不多。
- 浏览器兼容问题，不同浏览器的音频元素展示不同。


因为以上两个问题，这就导致我们需要对原生的`audio`进行修改时比较困难。而对于大多数音频的需求，我们可以使用满足我们要求的第三方组件库中选择，如：
- [西瓜播放器](https://v2.h5player.bytedance.com/music)
- [Media Element](https://github.com/mediaelement/mediaelement)

而对于 UI 有要求的需求，比如音乐播放器的需求，那就要遵循整个页面的 UI 主题，这种情况下我们就需要自定义编写一个音频组件了。

在本文中，我们将学会：

1. 如何修改音频元素的默认样式
2. 如何重写音频自定义样式

## 如何修改音频元素的默认样式

默认情况下，音频元素不可见。需要添加控件属性以使其控件可见。
``` html
<audio controls="true" src="音频.mp3" ></audio>
```

![image.png](https://s2.loli.net/2022/08/31/Z2e9CmKl3EkTgyb.png)

音频元素在CSS中具有以下伪元素选择器：

``` css
audio::-webkit-media-controls-panel
audio::-webkit-media-controls-mute-button
audio::-webkit-media-controls-play-button
audio::-webkit-media-controls-timeline-container
audio::-webkit-media-controls-current-time-display
audio::-webkit-media-controls-time-remaining-display
audio::-webkit-media-controls-timeline
audio::-webkit-media-controls-volume-slider-container
audio::-webkit-media-controls-volume-slider
audio::-webkit-media-controls-seek-back-button
audio::-webkit-media-controls-seek-forward-button
audio::-webkit-media-controls-fullscreen-button
audio::-webkit-media-controls-rewind-button
audio::-webkit-media-controls-return-to-realtime-button
audio::-webkit-media-controls-toggle-closed-captions-button
```

这写伪类选择器，可以改变音频元素的基本样式，但是仅在Chrome浏览器下有效。

我把所有的伪类都给上不同的背景颜色，最后呈现的效果如下图所示：
``` css
audio::-webkit-media-controls-xxx{
  background-color: 颜色随机;
}
```
![image.png](https://s2.loli.net/2022/08/31/SnqNdYxW5oQyTa1.png)

也就是，只能修改部分样式，没有提供更细致的修改。

如果想要设置进度条的颜色，基本只能自定义重写播放器了。

## 自定义音频播放器

接下来，将是我们本文的重点，我们将创建自己的自定义音频播放器。

我们自定义的播放器，它使用不同的元素来实现控件的UI。然后在 Javascript 的帮助下将音频元素的功能绑定到这些元素。


## Conclusion结论

使用伪元素选择器，您可以对音频元素进行简单的设计更改。

对于更复杂的设计更改，最好实现自定义音频播放器，然后使用 Javascript 将其绑定到音频元素以提供必要的功能

## 参考
- [How to Style an Audio Element](http音频元素在CSS中具有以下伪元素选择器：s://blog.shahednasser.com/how-to-style-an-audio-element/#using-pseudo-element-selectors)